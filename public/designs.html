<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Designs - HEXpostcards</title>

    <!-- Meta tags -->
    <meta name="description" content="Which designs are your favorite?">

    <!-- FACEBOOK -->
    <meta property="og:url" content="https://HEXpostcards.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="HEXpostcards.com">
    <meta property="og:description" content="Which designs are your favorite?">
    <meta property="og:image" content="https://www.hexpostcards.com/images/HEXpostcards_DesignContest_PulseChain_07_Banner.png">

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="HEXpostcards.com">
    <meta property="twitter:url" content="https://HEXpostcards.com/">
    <meta name="twitter:title" content="HEXpostcards.com">
    <meta name="twitter:description" content="Which designs are your favorite?">
    <meta name="twitter:image" content="https://www.hexpostcards.com/images/HEXpostcards_DesignContest_PulseChain_07_Banner.png">

    <!-- Styles -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"
      rel="stylesheet"
    />
    <link href="/css/styles.css" rel="stylesheet" />

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/navbar.js"></script>

    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <style>
      /* Custom components */
      .design-card {
        background-color: #1f2937;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
      }

      .design-card:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
      }

      .download-btn {
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .design-card:hover .download-btn {
        opacity: 1;
      }

      .design-image {
        transition: transform 0.3s ease;
      }

      .design-card:hover .design-image {
        transform: scale(1.05);
      }

      .design-card .number {
        font-size: 2.5rem;
        font-weight: bold;
        color: #ffffff;
        background-color: #3498db;
        border-radius: 50%;
        padding: 0.5rem 1rem;
        z-index: 1000;
      }

      .filter-btn {
        transition: all 0.3s ease;
      }

      .filter-btn.active {
        background-color: #3b82f6;
        color: white;
      }

      /* Loading animation */
      .loading-spinner {
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-left: 4px solid #3b82f6;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* .contest-winner {
        border: 2px solid #ffd700;
      } */

      .contest-winner:hover {
        box-shadow: 0 4px 20px rgba(255, 215, 0, 0.3);
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <div id="navbar"></div>

    <!-- Hero Section -->
    <section class="pt-24 pb-12 bg-gradient-to-b from-blue-900 to-gray-900">
      <div class="container mx-auto px-4">
        <div class="text-center">
          <h1 class="text-4xl md:text-5xl font-bold mb-6">Design Gallery</h1>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto">
            Browse our collection of community-created designs. Download and use
            these designs for your own marketing efforts.
          </p>
        </div>
      </div>
    </section>

    <!-- Filter Section -->
    <section class="py-8 bg-gray-800">
      <div class="filter-section text-center my-4">
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg active"
          data-filter="all"
        >
          All Designs
        </button>
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
          data-filter="postcard"
        >
          Postcards
        </button>
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
          data-filter="letter"
        >
          Letters
        </button>
      </div>

      <div class="coin-filter-section text-center my-4">
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg active"
          data-coin="all"
        >
          All Coins
        </button>
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
          data-coin="HEX"
        >
          HEX
        </button>
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
          data-coin="PLS"
        >
          PLS
        </button>
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
          data-coin="PLSX"
        >
          PLSX
        </button>
        <div class="filter-section text-center my-4">
          <button 
            class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
            data-has-pdf="true"
          >
            Show Only Printable (PDF)
          </button>
        </div>
      </div>

      <div class="winner-filter-section text-center my-4">
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg active"
          data-winner="winners-only"
        >
          <span class="mr-2">üèÜ</span>Contest Winners
        </button>
        <button
          class="filter-btn bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg"
          data-winner="all"
        >
          All Designs
        </button>
      </div>
    </section>

    <!-- Contest Section -->
    <section class="py-12 bg-blue-900/20" style="display: none">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto bg-gray-800 rounded-lg p-8">
          <div class="text-center">
            <h2 class="text-3xl font-bold mb-6">Letter Design Contest</h2>
            <div class="space-y-6">
              <div class="previous-winners">
                <!-- <h3 class="text-xl font-semibold mb-4">üèÜ Previous Contest Winners</h3> -->
                <div class="grid md:grid-cols-3 gap-4">
                  <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="font-bold">1st Place</p>
                    <p class="text-blue-400">Mrs Hexican</p>
                    <p class="text-sm text-gray-400">$600 Prize</p>
                  </div>
                  <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="font-bold">2nd Place</p>
                    <p class="text-blue-400">Hexgeta</p>
                    <p class="text-sm text-gray-400">$300 Prize</p>
                  </div>
                  <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="font-bold">3rd Place</p>
                    <p class="text-blue-400">Euphoria Design</p>
                    <p class="text-sm text-gray-400">$100 Prize</p>
                  </div>
                </div>
              </div>

              <!-- <div class="next-contest bg-gray-700 p-6 rounded-lg mt-8"> -->
              <!-- <h3 class="text-xl font-semibold mb-4">Next Contest Coming Soon!</h3> -->
              <!-- <p class="text-gray-300 mb-4">Join our Telegram group to be notified when the next design contest begins.</p> -->
              <!-- <div class="space-y-4"> -->
              <!-- <p class="text-gray-300"><strong>Previous Prize Pool:</strong></p> -->
              <!-- <ul class="list-disc pl-5 text-gray-300"> -->
              <!-- <li>1st Place: $600</li> -->
              <!-- <li>2nd Place: $300</li> -->
              <!-- <li>3rd Place: $100</li> -->
              <!-- </ul> -->
              <!-- <a href="https://t.me/HEXpostcards" target="_blank"  -->
              <!-- class="bg-blue-600 hover:bg-blue-700 px-8 py-3 rounded-lg inline-block transition mt-4"> -->
              <!-- Join Telegram Group -->
              <!-- </a> -->
              <!-- </div> -->
              <!-- </div> -->

              <!-- <div class="mt-8 p-4 bg-yellow-600/20 rounded-lg"> -->
              <!-- <p class="text-lg">üí° <strong>Tips for Contest Success:</strong></p> -->
              <!-- <ul class="list-disc pl-5 mt-2 space-y-2 text-gray-300"> -->
              <!-- <li>Always use "HEX.COM" instead of just "HEX"</li> -->
              <!-- <li>Include clear call-to-actions</li> -->
              <!-- <li>Ensure text is easily readable</li> -->
              <!-- <li>Follow provided size specifications</li> -->
              <!-- <li>Focus on benefits and key features</li> -->
              <!-- </ul> -->
              <!-- </div> -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Design Grid -->
    <section class="py-16">
      <div class="container mx-auto px-4">
        <div
          class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"
          id="design-grid"
        ></div>

        <!-- Loading Spinner -->
        <div id="loading" class="text-center py-12 hidden">
          <div class="loading-spinner mx-auto"></div>
          <p class="mt-4 text-gray-400">Loading more designs...</p>
        </div>

        <!-- Load More Button -->
        <!-- <div class="text-center mt-12">
          <button
            id="load-more"
            class="bg-blue-600 hover:bg-blue-700 px-8 py-3 rounded-lg font-medium text-lg transition"
          >
            Load More Designs
          </button>
        </div> -->
      </div>
    </section>

    <!-- Call to Action -->
    <section class="py-16 bg-blue-900/20">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold mb-8">Want to Contribute?</h2>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/action"
            class="bg-blue-600 hover:bg-blue-700 px-8 py-4 rounded-lg font-medium text-lg transition"
          >
            Take Action
          </a>
          <a
            href="https://t.me/HEXpostcards"
            target="_blank"
            class="bg-gray-700 hover:bg-gray-600 px-8 py-4 rounded-lg font-medium text-lg transition"
          >
            Join Community
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <div id="footer"></div>

    <script>
      $(document).ready(function() {
          $('#navbar').load('/navbar.html', function() {
              initMobileMenu();
          });

          $('#footer').load('/footer.html');
      });

      // Global variables
      var designs = {};
      var totalDesigns = 0;
      let currentTypeFilter = 'letter';
      let currentCoinFilter = 'all';
      let showOnlyPDF = false;
      let currentWinnerFilter = 'winners-only';

      // Utility Functions
      function getOrdinalSuffix(n) {
        const s = ["th", "st", "nd", "rd"];
        const v = n % 100;
        return s[(v - 20) % 10] || s[v] || s[0];
      }

      // Core Functions
      function createDesignCard(design) {
        let winnerBadge = '';
        let winnerClass = '';
        
        if (design.contestWinner) {
          const place = design.contestWinner.place;
          const contestId = design.contestWinner.contestId;
          winnerClass = 'contest-winner';
          
          let badgeText;
          let badgeColor;
          
          switch(place) {
            case 1:
              badgeText = `üèÜ Contest ${contestId} - 1st Place`;
              badgeColor = 'bg-yellow-500';
              break;
            case 2:
              badgeText = `ü•à Contest ${contestId} - 2nd Place`;
              badgeColor = 'bg-gray-300';
              break;
            case 3:
              badgeText = `ü•â Contest ${contestId} - 3rd Place`;
              badgeColor = 'bg-yellow-600';
              break;
            case 4:
              const specialType = design.contestWinner.type || 'Honorable Mention';
              badgeText = `‚ú® Contest ${contestId} - ${specialType}`;
              badgeColor = 'bg-purple-500';
              break;
            default:
              badgeText = `‚ú® Contest ${contestId} - Special Mention`;
              badgeColor = 'bg-purple-500';
          }
          
          // winnerBadge = `
          //   <div class="absolute top-2 right-2 z-10">
          //     <div class="${badgeColor} text-black font-bold px-3 py-1 rounded-full text-sm">
          //       ${badgeText}
          //     </div>
          //   </div>
          // `;
        }

        let pdfButton = design.pdf
          ? `<a href="${design.pdf}" target="_blank" class="download-btn bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg inline-block text-sm sm:text-base sm:px-6 pdf-download">Download PDF</a>`
          : '';

        let telegramLink = design.telegram
          ? `<a href="${design.telegram}" target="_blank" class="text-blue-400 hover:underline text-sm">Telegram</a>`
          : '';

        let twitterLink = design.twitter
          ? `<a href="${design.twitter}" target="_blank" class="text-blue-400 hover:underline text-sm">Twitter</a>`
          : '';

        let address = design.address
          ? `<p class="text-gray-400 text-sm break-all">${design.address}</p>`
          : '';

        let imagesHtml = design.images
          .map(
            (image, index) => `
              <div class="relative overflow-hidden rounded-lg mb-4">
                <a href="${image}" target="_blank" class="block">
                  <img src="${image}" 
                    alt="${design.creator} Image ${index + 1}" 
                    title="Right-click to save image"
                    class="design-image w-full h-auto object-cover cursor-pointer"
                    style="user-select: auto; -webkit-user-drag: auto;">
                </a>
                <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity pointer-events-none">
                  <div class="space-y-2 sm:space-y-4 p-2 sm:p-4 text-center pointer-events-auto">
                    ${pdfButton}
                    <a href="${image}" target="_blank" download
                      class="download-btn bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg inline-block text-sm sm:text-base sm:px-6">
                      Download Image
                    </a>
                  </div>
                </div>
              </div>`
          )
          .join('');

        return `
          <div class="design-card p-3 sm:p-6 relative overflow-hidden ${winnerClass}"
            data-design-type="${design.designType}"
            data-coins="${design.coins.join(',')}"
            data-has-pdf="${!!design.pdf}"
            data-design-id="${design.id}"
            data-contest-winner="${!!design.contestWinner}"
          >
            ${winnerBadge}
            <div class="number absolute top-2 left-2 bg-blue-600 text-white font-bold text-lg sm:text-2xl rounded-full px-2 sm:px-3 py-1 z-10">
              ${design.id}
            </div>
            ${imagesHtml}
            <div class="space-y-2">
              <h3 class="text-base sm:text-lg font-semibold">${design.creator}</h3>
              <div class="flex gap-3 flex-wrap">
                ${telegramLink}
                ${twitterLink}
              </div>
              ${address}
            </div>
          </div>`;
      }

      function applyFilters() {
        $('.design-card').each(function () {
          const $card = $(this);
          const designType = $card.data('design-type');
          const coins = $card.data('coins').toString().split(',');
          const hasPDF = $card.find('a[href$=".pdf"]').length > 0;
          const isWinner = $card.data('contest-winner');

          const matchesType = currentTypeFilter === 'all' || designType === currentTypeFilter;
          const matchesCoin = currentCoinFilter === 'all' || coins.includes(currentCoinFilter);
          const matchesPDF = !showOnlyPDF || hasPDF;
          const matchesWinner = currentWinnerFilter === 'all' || (currentWinnerFilter === 'winners-only' && isWinner);

          if (matchesType && matchesCoin && matchesPDF && matchesWinner) {
            $card.show();
          } else {
            $card.hide();
          }
        });
      }

      function loadDesigns(start, count) {
        const batch = designs.slice(start, start + count);
        const html = batch.map(createDesignCard).join('');
        $('#design-grid').append(html);
      }

      function initializeFilters() {
        // Set winners-only and letters as default active filters
        $('.filter-btn[data-winner="all"]').removeClass('active');
        $('.filter-btn[data-winner="winners-only"]').addClass('active');
        
        $('.filter-btn[data-filter]').removeClass('active');
        $('.filter-btn[data-filter="letter"]').addClass('active');
        
        applyFilters();
      }

      // Data Loading
      async function loadDesignsData() {
        try {
          const response = await fetch('/designs.json');
          designs = await response.json();
          designs = designs.filter(design => design.active === 1);
          
          totalDesigns = designs.length;
          loadDesigns(0, designs.length);
          initializeFilters();
        } catch (error) {
          console.error('Error loading designs:', error);
        }
      }

      // Event Handlers
      function setupEventHandlers() {
        // Handle design type filter
        $('.filter-btn[data-filter]').click(function () {
          currentTypeFilter = $(this).data('filter');
          $('.filter-btn[data-filter]').removeClass('active');
          $(this).addClass('active');
          applyFilters();
        });

        // Handle coin filter
        $('.filter-btn[data-coin]').click(function () {
          currentCoinFilter = $(this).data('coin');
          $('.filter-btn[data-coin]').removeClass('active');
          $(this).addClass('active');
          applyFilters();
        });

        // Handle PDF filter
        $('.filter-btn[data-has-pdf]').click(function () {
          $(this).toggleClass('active');
          showOnlyPDF = $(this).hasClass('active');
          applyFilters();
        });

        // Handle winner filter
        $('.filter-btn[data-winner]').click(function () {
          currentWinnerFilter = $(this).data('winner');
          $('.filter-btn[data-winner]').removeClass('active');
          $(this).addClass('active');
          applyFilters();
        });

        // Handle smooth scroll
        $('a[href^="#"]').click(function (e) {
          e.preventDefault();
          let target = $(this.hash);
          if (target.length) {
            $('html, body').animate(
              {
                scrollTop: target.offset().top - 80,
              },
              500
            );
          }
        });
      }

      // Initialize everything when document is ready
      $(document).ready(function() {
        // Load navbar and footer
        $('#navbar').load('/navbar.html', function() {
          initMobileMenu();
        });
        $('#footer').load('/footer.html');
        
        // Setup all event handlers
        setupEventHandlers();
      });

      // Load designs when DOM is fully loaded
      document.addEventListener('DOMContentLoaded', loadDesignsData);

      //   // Lazy loading for images
      //   const observer = new IntersectionObserver((entries) => {
      //     entries.forEach((entry) => {
      //       if (entry.isIntersecting) {
      //         const img = entry.target;
      //         img.src = img.dataset.src;
      //         observer.unobserve(img);
      //       }
      //     });
      //   });

      //   document
      //     .querySelectorAll('img[data-src]')
      //     .forEach((img) => observer.observe(img));

      //   // Load more functionality
      //   let page = 1;
      //   const perPage = 9;

      //   $('#load-more').click(function () {
      //     const $btn = $(this);
      //     $btn.prop('disabled', true);
      //     $('#loading').removeClass('hidden');

      //     // Simulate loading more designs
      //     setTimeout(() => {
      //       // Add more design cards here
      //       $btn.prop('disabled', false);
      //       $('#loading').addClass('hidden');
      //       page++;

      //       // Hide button if no more designs
      //       if (page * perPage >= totalDesigns) {
      //         $btn.hide();
      //       }
      //     }, 1000);
      //   });
      // });
    </script>
  </body>
</html>
